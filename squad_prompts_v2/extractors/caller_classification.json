{
  "name": "caller_classification",
  "description": "Classify caller type and determine their purpose",
  "output": [
    {
      "name": "caller_type",
      "type": "string",
      "enum": [
        "NEW_CLIENT",
        "EXISTING_CLIENT",
        "INSURANCE_ADJUSTER",
        "VENDOR",
        "MEDICAL_PROVIDER",
        "LEGAL_SYSTEM",
        "SPANISH_SPEAKING",
        "REFERRAL_SOURCE",
        "BUSINESS_SALES",
        "FAMILY_MEMBER",
        "OTHER",
        "UNKNOWN"
      ],
      "description": "The type of caller based on their introduction and context"
    },
    {
      "name": "purpose",
      "type": "string",
      "enum": [
        "case_info",
        "billing",
        "new_matter",
        "patient_care",
        "staff_request",
        "disbursement",
        "bulk_inquiry",
        "referral_fee",
        "sales",
        "leave_message",
        "other"
      ],
      "description": "Why the caller is calling"
    },
    {
      "name": "client_name",
      "type": "string",
      "description": "For external callers (insurance, medical, legal), the name of the client/patient they are calling about. Null if caller is the client themselves or not mentioned."
    },
    {
      "name": "target_staff_name",
      "type": "string",
      "description": "If caller explicitly asked for a specific staff member by name, that name. Null otherwise."
    },
    {
      "name": "customer_success_trigger",
      "type": "boolean",
      "description": "True if any of: multiple cases mentioned, family member about someone's case, disbursement questions, cannot classify, referral partner"
    }
  ],
  "classification_rules": {
    "NEW_CLIENT": "Seeking representation - accident, injury, need lawyer, do I have a case, referred by someone",
    "EXISTING_CLIENT": "Already has a case - my case manager, my case, my settlement, following up",
    "INSURANCE_ADJUSTER": "Insurance company rep - company names (State Farm, Progressive, etc.), adjuster, claim. Note: This classification is FINAL and cannot be overridden even if they mention billing",
    "VENDOR": "Calling about invoice/payment owed TO them, not about a case",
    "MEDICAL_PROVIDER": "Hospital, clinic, calling about a patient, medical records. If billing purpose, still classify as MEDICAL_PROVIDER but purpose=billing",
    "LEGAL_SYSTEM": "Court reporter, defense attorney, deposition",
    "SPANISH_SPEAKING": "Speaks Spanish, asks habla espanol",
    "REFERRAL_SOURCE": "Following up on a referral they made",
    "BUSINESS_SALES": "Sales/solicitation call",
    "FAMILY_MEMBER": "Calling about someone else's case (my mom's case, my son's attorney)"
  },
  "examples": [
    {
      "input": "This is Devon from State Farm. I need to check on John Doe's claim.",
      "output": {
        "caller_type": "INSURANCE_ADJUSTER",
        "purpose": "case_info",
        "client_name": "John Doe",
        "target_staff_name": null,
        "customer_success_trigger": false
      }
    },
    {
      "input": "I was in a car accident last week and need a lawyer.",
      "output": {
        "caller_type": "NEW_CLIENT",
        "purpose": "new_matter",
        "client_name": null,
        "target_staff_name": null,
        "customer_success_trigger": false
      }
    },
    {
      "input": "I'm calling about my case. My case manager is Sarah.",
      "output": {
        "caller_type": "EXISTING_CLIENT",
        "purpose": "case_info",
        "client_name": null,
        "target_staff_name": null,
        "customer_success_trigger": false
      }
    },
    {
      "input": "This is Emory Hospital billing department. We have an outstanding invoice.",
      "output": {
        "caller_type": "MEDICAL_PROVIDER",
        "purpose": "billing",
        "client_name": null,
        "target_staff_name": null,
        "customer_success_trigger": false
      }
    },
    {
      "input": "I need to check on about 5 patients for First Penn.",
      "output": {
        "caller_type": "MEDICAL_PROVIDER",
        "purpose": "bulk_inquiry",
        "client_name": null,
        "target_staff_name": null,
        "customer_success_trigger": true
      }
    },
    {
      "input": "Can I speak with Taylor?",
      "output": {
        "caller_type": "UNKNOWN",
        "purpose": "staff_request",
        "client_name": null,
        "target_staff_name": "Taylor",
        "customer_success_trigger": false
      }
    },
    {
      "input": "I'm calling about my mother's case.",
      "output": {
        "caller_type": "FAMILY_MEMBER",
        "purpose": "case_info",
        "client_name": null,
        "target_staff_name": null,
        "customer_success_trigger": true
      }
    }
  ]
}
